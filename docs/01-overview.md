# é¡¹ç›®æ¦‚è¿°

## ğŸ¯ VxCore æ˜¯ä»€ä¹ˆï¼Ÿ

VxCore æ˜¯ä¸€ä¸ªåŸºäº **Vert.x** å’Œ **jOOQ** çš„ç°ä»£åŒ–æ•°æ®åº“è®¿é—®æ¡†æ¶ï¼Œä¸“ä¸ºé«˜å¹¶å‘ã€é«˜æ€§èƒ½çš„ä¼ä¸šçº§åº”ç”¨è®¾è®¡ã€‚å®ƒæä¾›äº†ç±»å‹å®‰å…¨ã€å¼‚æ­¥éé˜»å¡çš„æ•°æ®åº“æ“ä½œèƒ½åŠ›ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾æ„å»ºå¯æ‰©å±•çš„å¾®æœåŠ¡åº”ç”¨ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ é«˜æ€§èƒ½å¼‚æ­¥æ¶æ„
- **éé˜»å¡I/O**: åŸºäºVert.xäº‹ä»¶å¾ªç¯ï¼Œæ”¯æŒé«˜å¹¶å‘
- **è¿æ¥æ± ç®¡ç†**: æ™ºèƒ½è¿æ¥æ± ï¼Œè‡ªåŠ¨ç®¡ç†æ•°æ®åº“è¿æ¥
- **Futureé“¾å¼è°ƒç”¨**: æ”¯æŒcomposeã€flatMapç­‰ç»„åˆæ“ä½œ

### ğŸ”’ ç±»å‹å®‰å…¨
- **jOOQ DSL**: ç¼–è¯‘æ—¶SQLæ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯
- **é˜²SQLæ³¨å…¥**: å®Œå…¨é˜²æ­¢SQLæ³¨å…¥æ”»å‡»
- **ç±»å‹æ˜ å°„**: è‡ªåŠ¨å¤„ç†Javaç±»å‹ä¸SQLç±»å‹è½¬æ¢

### ğŸ› ï¸ å¼€å‘å‹å¥½
- **æ³¨è§£é©±åŠ¨**: ä¸°å¯Œçš„æ³¨è§£æ”¯æŒï¼Œç®€åŒ–é…ç½®
- **ä»£ç ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆå®ä½“ç±»å’ŒDAO
- **è°ƒè¯•æ”¯æŒ**: è¯¦ç»†çš„SQLæ‰§è¡Œæ—¥å¿—

### ğŸ“ˆ æ˜“äºæ‰©å±•
- **æ’ä»¶æ¶æ„**: æ”¯æŒè‡ªå®šä¹‰æ‰©å±•
- **å¤šæ•°æ®åº“**: æ”¯æŒMySQLã€PostgreSQLã€H2ç­‰
- **äº‹åŠ¡æ”¯æŒ**: å®Œæ•´çš„äº‹åŠ¡ç®¡ç†èƒ½åŠ›

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VxCore æ¶æ„å±‚æ¬¡                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åº”ç”¨å±‚ (Application Layer)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Verticle  â”‚ â”‚   Service   â”‚ â”‚   Handler    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®è®¿é—®å±‚ (Data Access Layer)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚     DAO     â”‚ â”‚   Mapper    â”‚ â”‚   Template  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¡†æ¶å±‚ (Framework Layer)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ JooqExecutorâ”‚ â”‚JooqDslBuilderâ”‚ â”‚SqlAuditListenerâ”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Vert.x Pool â”‚ â”‚   jOOQ      â”‚ â”‚   JDBC      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. JooqExecutor - æ ¸å¿ƒæ‰§è¡Œå™¨
```java
// åŸºäºjOOQ DSLçš„æŸ¥è¯¢æ‰§è¡Œå™¨
public class JooqExecutor {
    // æ‰§è¡ŒjOOQæŸ¥è¯¢
    public Future<RowSet<Row>> executeQuery(Query query);
    
    // æ‰§è¡Œæ›´æ–°æ“ä½œ
    public Future<Integer> executeUpdate(Query query);
    
    // æ‰§è¡Œæ’å…¥æ“ä½œ
    public Future<Long> executeInsert(Query query);
}
```

#### 2. AbstractDao - åŸºç¡€DAO
```java
// æä¾›åŸºç¡€CRUDæ“ä½œ
public abstract class AbstractDao<T, ID> implements JooqDao<T, ID> {
    // æ’å…¥å®ä½“
    public Future<Optional<T>> insert(T entity);
    
    // æ›´æ–°å®ä½“
    public Future<Optional<T>> update(T entity);
    
    // æ ¹æ®IDæŸ¥è¯¢
    public Future<Optional<T>> findById(ID id);
    
    // æ¡ä»¶æŸ¥è¯¢
    public Future<List<T>> findByCondition(Condition condition);
}
```

#### 3. EnhancedDao - å¢å¼ºDAO
```java
// æä¾›é«˜çº§æŸ¥è¯¢åŠŸèƒ½
public abstract class EnhancedDao<T, ID> extends AbstractDao<T, ID> {
    // åˆ†é¡µæŸ¥è¯¢
    public Future<PageResult<T>> findPage(PageRequest pageRequest, Condition condition);
    
    // æ‰¹é‡æ“ä½œ
    public Future<List<T>> batchInsert(List<T> entities);
    
    // èšåˆæŸ¥è¯¢
    public Future<Long> count(Condition condition);
}
```

## ğŸ¯ è®¾è®¡ç†å¿µ

### 1. å¼‚æ­¥ä¼˜å…ˆ
æ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œé¿å…é˜»å¡äº‹ä»¶å¾ªç¯ï¼š
```java
// âŒ é˜»å¡æ“ä½œ
User user = userDao.findById(1L).get(); // é˜»å¡ç­‰å¾…

// âœ… å¼‚æ­¥æ“ä½œ
userDao.findById(1L)
    .compose(userOptional -> {
        if (userOptional.isPresent()) {
            return processUser(userOptional.get());
        }
        return Future.failedFuture("User not found");
    });
```

### 2. ç±»å‹å®‰å…¨
åˆ©ç”¨jOOQ DSLçš„ç¼–è¯‘æ—¶æ£€æŸ¥ï¼š
```java
// âŒ å­—ç¬¦ä¸²SQLï¼Œå®¹æ˜“å‡ºé”™
String sql = "SELECT * FROM users WHERE name = '" + name + "'";

// âœ… jOOQ DSLï¼Œç±»å‹å®‰å…¨
Field<String> nameField = DSL.field("name", String.class);
Query query = DSL.select().from(DSL.table("users"))
    .where(nameField.eq(name));
```

### 3. ç»„åˆä¼˜äºç»§æ‰¿
é€šè¿‡ç»„åˆæ¨¡å¼å®ç°åŠŸèƒ½æ‰©å±•ï¼š
```java
// ç»„åˆä¸åŒçš„æ‰§è¡Œå™¨
public class UserService {
    private final JooqExecutor jooqExecutor;
    private final JooqTemplateExecutor templateExecutor;
    
    public UserService(JooqExecutor jooqExecutor, JooqTemplateExecutor templateExecutor) {
        this.jooqExecutor = jooqExecutor;
        this.templateExecutor = templateExecutor;
    }
}
```

## ğŸš€ æ€§èƒ½ä¼˜åŠ¿

### 1. éé˜»å¡I/O
- **é«˜å¹¶å‘**: å•çº¿ç¨‹å¤„ç†æ•°åƒä¸ªå¹¶å‘è¿æ¥
- **ä½å»¶è¿Ÿ**: é¿å…çº¿ç¨‹åˆ‡æ¢å¼€é”€
- **é«˜åå**: å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æº

### 2. è¿æ¥æ± ä¼˜åŒ–
- **æ™ºèƒ½ç®¡ç†**: è‡ªåŠ¨è°ƒæ•´è¿æ¥æ± å¤§å°
- **è¿æ¥å¤ç”¨**: å‡å°‘è¿æ¥å»ºç«‹å¼€é”€
- **è¶…æ—¶æ§åˆ¶**: é¿å…è¿æ¥æ³„æ¼

### 3. æŸ¥è¯¢ä¼˜åŒ–
- **é¢„ç¼–è¯‘è¯­å¥**: è‡ªåŠ¨ç¼“å­˜PreparedStatement
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡æ’å…¥å’Œæ›´æ–°
- **åˆ†é¡µæŸ¥è¯¢**: é¿å…å¤§ç»“æœé›†å†…å­˜é—®é¢˜

## ğŸ”§ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒä¾èµ–
- **Java 17+**: ç°ä»£Javaç‰¹æ€§
- **Vert.x 4.5+**: å¼‚æ­¥åº”ç”¨æ¡†æ¶
- **jOOQ 3.19+**: SQLæ„å»ºå·¥å…·
- **Maven 3.9+**: æ„å»ºå·¥å…·

### æ•°æ®åº“æ”¯æŒ
- **MySQL 8.0+**: ä¸»è¦æ”¯æŒæ•°æ®åº“
- **PostgreSQL 13+**: ä¼ä¸šçº§æ•°æ®åº“
- **H2**: å†…å­˜æ•°æ®åº“ï¼Œç”¨äºæµ‹è¯•

### å¼€å‘å·¥å…·
- **Maven**: ä¾èµ–ç®¡ç†å’Œæ„å»º
- **JUnit 5**: å•å…ƒæµ‹è¯•æ¡†æ¶
- **Logback**: æ—¥å¿—æ¡†æ¶
- **SLF4J**: æ—¥å¿—é—¨é¢

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### åŸºå‡†æµ‹è¯•ç»“æœ
- **å¹¶å‘è¿æ¥**: æ”¯æŒ10,000+å¹¶å‘è¿æ¥
- **æŸ¥è¯¢å»¶è¿Ÿ**: å¹³å‡å»¶è¿Ÿ < 1ms
- **ååé‡**: 100,000+ QPS
- **å†…å­˜ä½¿ç”¨**: ä½å†…å­˜å ç”¨ï¼Œ< 100MB

### ä¸åŒç±»æ¡†æ¶å¯¹æ¯”
| æ¡†æ¶ | å¹¶å‘æ€§èƒ½ | ç±»å‹å®‰å…¨ | å­¦ä¹ æˆæœ¬ | ç¤¾åŒºæ”¯æŒ |
|------|----------|----------|----------|----------|
| VxCore | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­â­ |
| MyBatis | â­â­â­ | â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| JPA/Hibernate | â­â­ | â­â­â­â­ | â­â­â­ | â­â­â­â­â­ |
| Spring Data | â­â­â­ | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |

## ğŸ¯ é€‚ç”¨åœºæ™¯

### âœ… é€‚åˆçš„åœºæ™¯
- **å¾®æœåŠ¡æ¶æ„**: é«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„æœåŠ¡
- **å®æ—¶åº”ç”¨**: éœ€è¦å¿«é€Ÿå“åº”çš„åº”ç”¨
- **å¤§æ•°æ®å¤„ç†**: éœ€è¦å¤„ç†å¤§é‡æ•°æ®çš„åº”ç”¨
- **äº‘åŸç”Ÿåº”ç”¨**: å®¹å™¨åŒ–éƒ¨ç½²çš„åº”ç”¨

### âŒ ä¸é€‚åˆçš„åœºæ™¯
- **ç®€å•CRUD**: å¯¹äºç®€å•çš„CRUDæ“ä½œå¯èƒ½è¿‡äºå¤æ‚
- **ä¼ ç»Ÿä¼ä¸š**: éœ€è¦å¤§é‡ORMç‰¹æ€§çš„ä¼ ç»Ÿä¼ä¸šåº”ç”¨
- **å­¦ä¹ é¡¹ç›®**: å¯¹äºåˆå­¦è€…å¯èƒ½å­¦ä¹ æ›²çº¿è¾ƒé™¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ·»åŠ ä¾èµ–
```xml
<dependency>
    <groupId>cn.qaiu</groupId>
    <artifactId>core-database</artifactId>
    <version>1.0.0</version>
</dependency>
```

### 2. åˆ›å»ºå®ä½“
```java
@DataObject
public class User {
    private Long id;
    private String username;
    private String email;
    
    public User(JsonObject json) {
        this.id = json.getLong("id");
        this.username = json.getString("username");
        this.email = json.getString("email");
    }
    
    public JsonObject toJson() {
        return new JsonObject()
            .put("id", id)
            .put("username", username)
            .put("email", email);
    }
}
```

### 3. åˆ›å»ºDAO
```java
public class UserDao extends AbstractDao<User, Long> {
    public UserDao(JooqExecutor executor) {
        super(executor, User.class);
    }
}
```

### 4. ä½¿ç”¨DAO
```java
// åˆ›å»ºç”¨æˆ·
User user = new User();
user.setUsername("john");
user.setEmail("john@example.com");

userDao.insert(user)
    .onSuccess(insertedUser -> {
        System.out.println("User created: " + insertedUser.get().getId());
    })
    .onFailure(throwable -> {
        System.err.println("Failed to create user: " + throwable.getMessage());
    });
```

## ğŸ“š ä¸‹ä¸€æ­¥

- [å¿«é€Ÿå¼€å§‹æŒ‡å—](02-quick-start.md) - è¯¦ç»†çš„ä½¿ç”¨æ•™ç¨‹
- [æ¶æ„è®¾è®¡](04-architecture.md) - æ·±å…¥äº†è§£æ¶æ„è®¾è®¡
- [APIå‚è€ƒ](23-api-reference.md) - å®Œæ•´çš„APIæ–‡æ¡£

---

**ğŸ¯ VxCore - è®©æ•°æ®åº“è®¿é—®æ›´ç®€å•ã€æ›´å®‰å…¨ã€æ›´é«˜æ•ˆï¼**
